//
// Name, [Cats], [lat,lng], Desc, Address, City, State, ZipCode, Country, [Messages], Cost, [Schedule], Tel, Url
//

//   Courses-Daytime
var beyondTheConviction = ["Beyond the Conviction",["Computer Skills Training"],[39.013289,-94.565327],"We offer an Intro to Basic Computer training course. This course will introduce the client to basic operating components of a personal computer, basic computer functions/commands, typing, email, internet, Microsoft Word and more.","1734 E 63rd St","Kansas City","MO",64110,"United States",["** Client must complete Orientation and 4 day Career Readiness Training Workshop before signing up for this workshop. Advance Sign Up is required; To sign up for the class please call (816) 842-4975."],"Cost: SERVICE FEES VARY BASED ON SUBSIDIZED FUNDING GRANTS, PRIVATE FUNDING, OR IN KIND SERVICES THAT MAY BE AVAILABLE",["Schedule: EVERY OTHER MONDAY THRU FRIDAY from 12:00 p.m. to 2:00 p.m."],"816-842-4975","http://www.beyondtheconviction.org"];
var blueSpringsSeniorServices = ["Blue Springs Senior Services / Vesper Hall", ["Computer Skills Training"], [39.020338,-94.268429], "No description", "400 NW Vesper St.", "Blue Springs", "MO", 64014, "United States", [], "Regular classes are offered for a fee for persons age 50 and over. Fees range from $19 to $37.50.", [], "No phone information", "No website information"];
var coursesDayArray = [beyondTheConviction, blueSpringsSeniorServices];
//Close Courses-Daytime



//Courses-Evening
var empty = ["Missing", [""], [], "", "", "", "", 00000, "", [],"",[],"",""];
var gregg = ["Gregg/Klice Community Center",["Computer Skills Training"],[39.099727,-94.578567],"1600 John 'Buck' O'Neil Way","Kansas City","MO",64108,"United States","Friday, 9:30-10:30 a.m.", ["Learn the basics of computers while working at your own pace. Participants will get an introduction to basic computer programs and applications like Microsoft Word and Excel, email, and the Internet. This is a great class for beginners who want to build résumés, search for jobs, or keep in touch with friends and family via social media."], "$2 - Ages 60+", ["Sunday: ClosedMonday: ClosedTuesday: ClosedWednesday: ClosedThursday: ClosedFriday: 9:30-10:30Saturday: Closed"],"No phone information", "http://kcparks.org/facility/greggklice-community-center/"];
var allNightCourseLocs = [gregg];
//Close Courses-Evening



//Free WiFi Services
var andres = ["André’s Confiserie Suisse", ["Free Public Wifi"], [39.036254,-94.587620], "No description", "5018 Main St", "Kansas City", "MO", 64112, "United States", ["Yes"], "No cost information", [], "No phone information", "No website information"];
var barney = ["Barney Allis Plaza",["Free Public Wifi"], [39.100006,-94.585591], "No description", "12th Street and Wyandotte","Kansas City","MO",64105,"United States", ["Yes"], "No cost information", [], "No phone information", "No website information"];
var beignet = ["Beignet", ["Free Public Wifi"], [39.109506,-94.583141], "No description", "307 Main St", "Kansas City", "MO", 64105, "United States", ["Yes"], "No cost information", [], "No phone information", "No website information"];
var bella = ["Bella Napoli", ["Free Public Wifi"], [39.014445,-94.590968], "No description", "6229 Brookside Blvd", "Kansas City", "MO", 64113, "United States", ["Yes"], "No cost information", [], "No phone information", "No website information"];
var cafeTrio = ["Cafe Trio", ["Free Public Wifi"], [39.043756,-94.587038], "No description", "4558 Main St", "Kansas City", "MO", 64111, "United States", ["Yes"], "No cost information", [], "No phone information", "No website information"];
var chai = ["Chai Shai", ["Free Public Wifi"], [39.019935,-94.578962], "No description", "651 E 59th St", "Kansas City", "MO", 64110, "United States", ["Yes"], "No cost information", [], "No phone information", "No website information"];
var chez = ["Chez Elle Creperie Coffeehouse",["Free Public Wifi"],[39.092590,-94.593067],"No description","1713 Summit St","Kansas City","MO",64108,"United States", ["Yes"], "No cost information", [], "No phone information", "No website information"];
var drop = ["The Drop",["Free Public Wifi"], [39.070688, -94.57983], "409 E 31st St","Kansas City","MO",64121,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var foundry = ["The Foundry",["Free Public Wifi"],[39.053381, -94.591266], "424 Westport Rd","Kansas City","MO",64111,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var str1 = ["Starbucks",["Free Public Wifi"], [39.041548, -94.590776], "302 Nichols Rd","Kansas City","MO",64112,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var str2 = ["Starbucks",["Free Public Wifi"], [39.100336, -94.583807], "1100 Main St","Kansas City","MO",64105,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a1 = ["The Jacobson",["Free Public Wifi"], [39.087725, -94.58798], "2050 Central St","Kansas City","MO",64108,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a2 = ["RecordBar",["Free Public Wifi"], [39.050338, -94.599386], "1020 Westport Rd","Kansas City","MO",64111,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a3 = ["Rhythm & Booze",["Free Public Wifi"], [39.086786, -94.589954], "423 Southwest Blvd","Kansas City","MO",64108,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a4 = ["Roasterie Cafe",["Free Public Wifi"], [39.07906,  -94.598633], "1204 W 27th St","Kansas City","MO",64108,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a5 = ["Roasterie Cafe",["Free Public Wifi"], [39.014739, -94.590747], "6223 Brookside Blvd","Kansas City","MO",64113,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a6 = ["Roasterie Cafe",["Free Public Wifi"], [38.911417, -94.637462], "4511 119th St","Leawood","KS",66209,"United States",, ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a7 = ["Sasha’s Baking Co",["Free Public Wifi"], [39.103605, -94.584782], "105 W 9th St","Kansas City","MO",64105,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a8 = ["Scooters Coffeehouse",["Free Public Wifi"], [39.042609, -94.593013], "446 W 47th","Kansas City","MO",64112,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a9 = ["Scooter’s Coffeehouse",["Free Public Wifi"], [39.102448, -94.581602], "929 Walnut","Kansas City","MO",64106,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a10 = ["Scooter’s Coffeehouse",["Free Public Wifi"], [39.015426, -94.709377], "10610 Shawnee Mission Pkwy","Shawnee","KS",66203,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a11 = ["Silver Spoon Cafe",["Free Public Wifi"], [39.100455, -94.585222], "120 W 12th St","Kansas City","MO",64105,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a12 = ["Snow & Company",["Free Public Wifi"], [39.091383, -94.585757], "1815 Wyandotte St","Kansas City","MO",64108,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a13 = ["Panera",["Free Public Wifi"],[38.978017, -94.631082], "8300 Mission Rd","Prairie Village","KS",66206,"United States",, ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a14 = ["Panera",["Free Public Wifi"],[39.042076, -94.59386], "4700 Pennsylvania Ave","Kansas City","MO",64112,"United States",, ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a15 = ["Panera",["Free Public Wifi"],[38.942357, -94.606186], "1128 W 103 St","Kansas City","MO",64114,"United States",, ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a16 = ["Panera",["Free Public Wifi"],[39.083292, -94.58126], "2405 Grand Blvd","Kansas City","MO",64108,"United States",, ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a17 = ["Panera",["Free Public Wifi"],[39.246279, -94.649666], "6145 NW Barry Rd","Kansas City","MO",64154,"United States",, ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a18 = ["Panera",["Free Public Wifi"],[39.195319, -94.577821], "311 NE Englewood Rd","Kansas City","MO",64118,"United States",, ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a19 = ["Panera",["Free Public Wifi"],[39.052021, -94.591827], "4117 Mill St","Kansas City","MO",64111,"United States",, ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a20 = ["Panera",["Free Public Wifi"],[39.246278, -94.459653], "8580 N Church Rd","Kansas City","MO",64157,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a21 = ["Panera",["Free Public Wifi"],[39.013995, -94.591489], "6301 Brookside Blvd","Kansas City","MO",64113,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a22 = ["Panera",["Free Public Wifi"],[39.033378, -94.359698], "18800 E US Highway 40","Independence","MO",64055,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a23 = ["Panera",["Free Public Wifi"],[38.91532,  -94.647025], "11751 Nall Ave","Leawood","KS",66211,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a24 = ["Panera",["Free Public Wifi"],[38.885525, -94.66438], "6800 W 135th St","Overland Park","KS",66223,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a25 = ["Panera",["Free Public Wifi"],[39.020723, -94.666933], "7070 Martway St","Mission","KS",66202,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a26 = ["Panera",["Free Public Wifi"],[38.928659, -94.668937], "11022 Metcalf Ave","Overland Park","KS",66210,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a27 = ["Panera",["Free Public Wifi"],[38.992466, -94.687716], "8803 W 75th St","Overland Park","KS",66204,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a28 = ["Panera",["Free Public Wifi"],[39.015269, -94.708587], "10606 Shawnee Mission Pkwy","Shawnee","KS",66203,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a29 = ["Panera",["Free Public Wifi"],[38.956454, -94.717544], "11319 W 95th St","Overland Park","KS",66214,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a30 = ["Panera",["Free Public Wifi"],[38.946914, -94.753056], "14335 W 100th St","Lenexa","KS",66215,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a31 = ["Panera",["Free Public Wifi"],[38.913339, -94.761772], "15108 W 119th St","Olathe","KS",66062,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a32 = ["Panera",["Free Public Wifi"],[38.97007,  -94.762562], "15221 W 87th St","Lenexa","KS",66219,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a33 = ["Panera",["Free Public Wifi"],[38.851738, -94.818396], "20120 W 153rd St","Olathe","KS",66062,"United States", ["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var a34 = ["Panera",["Free Public Wifi"],[39.125835, -94.824103], "1811 Village W Pkwy","Kansas City","KS",66111,"United States",["Yes"],"Cost: ", [], "Phone: ", "Url: "];
var a35 = ["Planet Sub",["Free Public Wifi"],[39.037106, -94.587552],"4936 Main St","Kansas City","MO",64112,"United States",["Yes"], "Cost: ", [], "Phone: ", "Url: "];
var allFreeWifiLocs = [andres, barney, beignet, bella, cafeTrio, chai, chez, drop, foundry, str1, str2, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20, a21, a22, a22, a23, a24, a25, a26, a27, a28, a29, a30, a31, a32, a33, a34, a35];
//Close Free WiFi Services


//Public-Computers
var jc1 = ["Johnson County Library - Leawood",["Public Computer Access"],[38.917372 -94.640676],"4700 Town Center Dr.", "Leawood", "KS ", 66211, "United States",["No"],"Free to public", [], "No phone information", "http://jocolibrary.org/"];
var gar = ["Garrison Community Center",["Public Computer Access"],[39.111350,-94.568634],"1124 E. Fifth St.","Kansas City","MO",64106,"United States",[""],"Free - All Ages - If you need a computer to complete homework, search for a job, or just want to play a computer game, Garrison Community Center has a comfortable and roomy computer lab to fit your needs.", ["Open Computer Lab: Tuesday – Friday, 2:30 – 8:30 p.m., Saturday, 8 a.m. – 5 p.m., Sunday: Closed, Monday: Closed, Tuesday: 14:30-20:30, Wednesday: 14:30-20:30, Thursday: 14:30-20:30, Friday: 14:30-20:30"], "No phone information", "http://kcparks.org/facility/garrison-community-center/"];

var allPubComLocs = [jc1, gar];
//Close Public Computers


//all Paid Wifi
var allWifiWithSalesLocs = [empty];
//close all paid


//
var gw1 = ["Goodwill Bonner Springs",["Low Cost Computers"],[39.088373, -94.879945], "525 S 129th Street", "Bonner Springs" , "KS", 66012, "United States", [], "", [], "913-441-5701","http://mokangoodwill.org/"];
var allLowCostComLocs = [gw1];
//




// <svg version="1.1" class="iconic iconic-signal" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="11.26px" height="8px" viewBox="0 0 11.26 8" enable-background="new 0 0 11.26 8" xml:space="preserve">
//   <path class="iconic-signal-base" d="M6.337,7.247c-0.391-0.391-1.023-0.391-1.414,0l0.708,0.708L6.337,7.247z"/>
//   <g class="iconic-signal-wave">
//     <path class="iconic-signal-wave-inner" fill="none" stroke="#000000" stroke-miterlimit="10" d="M7.62,5.966c-1.098-1.098-2.88-1.098-3.977,0"/>
//     <path class="iconic-signal-wave-middle" fill="none" stroke="#000000" stroke-miterlimit="10" d="M9.31,4.275C7.278,2.244,3.984,2.245,1.952,4.276"/>
//     <path class="iconic-signal-wave-outer" fill="none" stroke="#000000" stroke-miterlimit="10" d="M10.9,2.684c-2.911-2.911-7.629-2.911-10.54,0"/>
//   </g>
// </svg>




var customerOnlyWifiSvg = {};

var map;

var kcBounds = { north:39.15, south: 39.05, east: -94.52, west: -94.525 };

var dayClassSvg = { path: 'M12.075,10.812c1.358-0.853,2.242-2.507,2.242-4.037c0-2.181-1.795-4.618-4.198-4.618S5.921,4.594,5.921,6.775c0,1.53,0.884,3.185,2.242,4.037c-3.222,0.865-5.6,3.807-5.6,7.298c0,0.23,0.189,0.42,0.42,0.42h14.273c0.23,0,0.42-0.189,0.42-0.42C17.676,14.619,15.297,11.677,12.075,10.812 M6.761,6.775c0-2.162,1.773-3.778,3.358-3.778s3.359,1.616,3.359,3.778c0,2.162-1.774,3.778-3.359,3.778S6.761,8.937,6.761,6.775 M3.415,17.69c0.218-3.51,3.142-6.297,6.704-6.297c3.562,0,6.486,2.787,6.705,6.297H3.415z', fillColor: 'orange', fillOpacity: 0.8, scale: 1.25, strokeColor: 'orange', strokeWeight: 2 };

var nightClassSvg = { path: 'M12.075,10.812c1.358-0.853,2.242-2.507,2.242-4.037c0-2.181-1.795-4.618-4.198-4.618S5.921,4.594,5.921,6.775c0,1.53,0.884,3.185,2.242,4.037c-3.222,0.865-5.6,3.807-5.6,7.298c0,0.23,0.189,0.42,0.42,0.42h14.273c0.23,0,0.42-0.189,0.42-0.42C17.676,14.619,15.297,11.677,12.075,10.812 M6.761,6.775c0-2.162,1.773-3.778,3.358-3.778s3.359,1.616,3.359,3.778c0,2.162-1.774,3.778-3.359,3.778S6.761,8.937,6.761,6.775 M3.415,17.69c0.218-3.51,3.142-6.297,6.704-6.297c3.562,0,6.486,2.787,6.705,6.297H3.415z', fillColor: 'navy', fillOpacity: 0.8, scale: 1.25, strokeColor: 'navy', strokeWeight: 2 };

var freeWifiSvg = { path: 'M6.337,7.247c-0.391-0.391-1.023-0.391-1.414,0l0.708,0.708L6.337,7.247z', fillColor: 'green', fillOpacity: 0.8, scale: 15, strokeColor: 'green', strokeWeight: .52};

var customerOnlyWifiSvg = { path: 'M6.337,7.247c-0.391-0.391-1.023-0.391-1.414,0l0.708,0.708L6.337,7.247z', fillColor: 'black', fillOpacity: 0.8, scale: 15, strokeColor: 'black', strokeWeight: .52};

var pubCompSvg = { path: 'M448,48v256H64V48H448 M448,16H64c-17.688,0-32,14.328-32,32v256c0,17.688,14.313,32,32,32h384c17.688,0,32-14.313,32-32V48C480,30.328,465.688,16,448,16L448,16z M480,344H32L0,440h512L480,344z M58.813,360h394.344l19.219,64H39.625L58.813,360z M0,448v16c0,17.688,14.313,32,32,32h448c17.688,0,32-14.313,32-32v-16H0z M400,488c-8.844,0-16-7.156-16-16s7.156-16,16-16s16,7.156,16,16S408.844,488,400,488z M464,488c-8.844,0-16-7.156-16-16s7.156-16,16-16s16,7.156,16,16S472.844,488,464,488z', fillColor: 'black', fillOpacity: 0.99, scale: .05, strokeColor: 'black', strokeWeight: .52};

var lowCostSvg = { path: 'M267.922,351.734V384h-25.719v-30.406c-19.516-0.609-39.047-6.25-50.203-13.469l8.375-29.766c12.406,7.531,29.438,13.781,48.344,13.781c19.812,0,33.141-9.703,33.141-24.438c0-14.391-10.828-23.156-34.078-31.641c-32.219-11.906-53.609-27.25-53.609-56.094c0-26.938,18.609-47.938,49.891-53.562V128h25.406v28.828c19.516,0.625,32.859,5.641,42.781,10.656l-8.375,28.828c-7.438-3.75-21.078-10.969-42.141-10.969c-21.703,0-29.453,11.281-29.453,21.938c0,12.844,11.156,20.359,37.812,30.719C304.797,251.156,320,268.062,320,296.281C320,322.922,301.703,346.094,267.922,351.734z', fillColor: 'black', fillOpacity: 1, scale: .085, strokeColor: 'black', strokeWeight: .82};





// m 27.673508,31 0,-2.430511 -7.673508,0 0,-4.593925 11.409145,0 C 31.735369,23.975564 32,23.706668 32,23.375496 L 32,1.6007883 C 32,1.2688968 31.735369,1 31.409145,1 L 0.59085517,1 C 0.2646315,1 0,1.2688968 0,1.6007883 L 0,23.375496 c 0,0.331172 0.2646315,0.600068 0.59085517,0.600068 l 11.40914483,0 0,4.593925 -7.5596338,0 0,2.430511 z m -25.51062,-9.895011 0,-17.5280016 c 0,-0.2861755 0.2277478,-0.5183554 0.5074193,-0.5183554 l 26.5444377,0 c 0.279671,0 0.507419,0.2325399 0.507419,0.5183554 l 0,17.5280016 c 0,0.286536 -0.227748,0.517636 -0.507419,0.517636 l -26.5444377,0 c -0.2796715,3.6e-4 -0.5074193,-0.2311 -0.5074193,-0.517636 z
function getAllLocations() {
   var masterList = {
                      publicComputers: [],
                      dayTraining: getDayCourseLocs(),
                      nightTraining: [],
                      freeWifi: getFreeWifiLocs(),
                      reqPurchase: [],
                      lowCost: []
                    };
  return masterList;
};

function getFreeWifiLocs() {
  return multiCsvToJson(allFreeWifiLocs);
};

function getWifiWithSalesLocs() {
  return multiCsvToJson(allWifiWithSalesLocs);
};

function getPubComLocs() {
  return multiCsvToJson(allPubComLocs);
};

function getDayCourseLocs() {
  return multiCsvToJson(coursesDayArray);
};

function getNightCourseLocs() {
  return multiCsvToJson(allNightCourseLocs);
};

function getLowCostComLocs() {
  return multiCsvToJson(allLowCostComLocs);
};

function flatten(arr) {
  return arr.reduce(function (flat, toFlatten) {
    return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);
  }, []);
}

function attachWindow(marker, htmlString) {
  // console.log("Attaching window");
  var infowindow = new google.maps.InfoWindow({
    content: htmlString
    // suppressInfoWindows: true
  });
  // console.log("returning infowindow");
  // console.log(infowindow);
  return infowindow;

};

function buildString(loc) {
  var contentString = '<div id="content" class="br classtrain-green">'+'<div id="siteNotice">'+'<p>'+ loc.cat +'</p></div>'+'<h2 id="firstHeading" class="firstHeading br">'+loc.name+'</h2>'+'<div id="bodyContent">'+'<h6><a class="linkedup">'+loc.address+ ', '+ loc.city +', ' + loc.state + ' '+ loc.zip + '</a></h6>'+'<h4>Hours Open</h4><p>'+loc.hrs+'</p>'+'<p>Website: <a href="'+loc.url+'">'+ loc.url +'</a></p>'+'</div>'+'</div>';
  return contentString;
};

function multiCsvToJson(nestedArrays) {
  var results = [];
  for (var i = 0; i < nestedArrays.length; i++) {
    // console.log(nestedArrays[i]);
    var loc = {
      name: nestedArrays[i][0],
      category: nestedArrays[i][1][0],
      position: [nestedArrays[i][2][0],nestedArrays[i][2][1]],
      desc: nestedArrays[i][3],
      address: nestedArrays[i][4],
      city: nestedArrays[i][5],
      state: nestedArrays[i][6],
      zip: nestedArrays[i][7],
      country: nestedArrays[i][8],
      messages: nestedArrays[i][9],
      zIndex: (i + 900),
      cost: nestedArrays[i][10],
      schedule: nestedArrays[i][11][0],
      tel: nestedArrays[i][12],
      url: nestedArrays[i][13]
    };
    results.push(loc);
  }
  // console.log("results for multiCsvToJson");
  // console.log(results);
  return results;
};


function getShape() {
                      var shape = {
                                    coords: [1, 1, 1, 20, 18, 20, 18, 1],
                                    type: 'poly'
                                  };

                      return shape;
                    };


function setIcon(string) {
  // console.log("Setting icon");
  // console.log(string);
  // var image = new Image(12,12);
  if ( string === "Computer Skills Training" ) {
    // console.log("Computer Skills Training");
    // console.log(dayClassSvg);
    return dayClassSvg;
  } else if (string === "Courses-Daytime") {
    // console.log("_________SET_ICON: Courses-Daytime");
    return dayClassSvg;
  } else if ( string === "Free Public Wifi" ) {
    // console.log("_________SET_ICON: freeWifiSvg");
    return freeWifiSvg;
  } else if (string === "WiFi Customers Only") {
    // console.log("_________SET_ICON: Wifi-for-customers-only")
  } else if ( string === "Courses-Evening") {
    // console.log("_________SET_ICON:  Courses-Evening");
    return nightClassSvg;
  } else if (string === "Public Computer Access"){
    // console.log("_________SET_ICON:  Public Computer Access");
    // console.log
    return pubCompSvg;
  } else if (string === "Low Cost Computers"){
    // console.log("_________SET_ICON:  Low Cost Computers");
    return lowCostSvg;
    // console.log
    return pubCompSvg;
  } else {
    // console.log("nothing worked");
    return nightClassSvg;
  }
};


function getMasterIndex() {

};


function initMap(location) {
  // console.log("Init map with location");
  // console.log(location);

  var roadMapType = new google.maps.StyledMapType([{"featureType":"landscape","elementType":"all","stylers":[{"hue":"#ffbb00"},{"saturation":"27"},{"lightness":37.599999999999994},{"gamma":1}]},{"featureType":"poi","elementType":"all","stylers":[{"hue":"#00ff6a"},{"saturation":"-2"},{"lightness":"11"},{"gamma":"0.95"},{"visibility":"on"}]},{"featureType":"poi","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"road.highway","elementType":"all","stylers":[{"hue":"#ffc200"},{"saturation":-61.8},{"lightness":45.599999999999994},{"gamma":1},{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"all","stylers":[{"hue":"#ff0300"},{"saturation":-100},{"lightness":51.19999999999999},{"gamma":1}]},{"featureType":"road.local","elementType":"all","stylers":[{"hue":"#ff0300"},{"saturation":-100},{"lightness":52},{"gamma":1}]},{"featureType":"water","elementType":"all","stylers":[{"hue":"#0078ff"},{"saturation":"-3"},{"lightness":"34"},{"gamma":1}]}],{name: 'Road'});

  var cityRoadType = new google.maps.StyledMapType([
    {"featureType":"administrative","elementType":"labels.text.stroke","stylers":[{"color":"#CCCCCC"}]},
    {"featureType":"administrative","elementType":"labels.text.fill","stylers":[{"color":"#4C4C4C"}]},
    {"featureType":"landscape","elementType":"all","stylers":[{"color":"#f2f2f2"}]},
    {"featureType":"poi","elementType":"all","stylers":[{"visibility":"simplified"}]},
    {"featureType":"road","elementType":"all","stylers":[{"saturation":50},{"lightness":25}]},
    {"featureType":"road.highway","elementType":"all","stylers":[{"visibility":"simplified"}]},
    // other_options_for_visibility: []
    {"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#595959"},{"saturation":3},{"lightness":17},{"gamma":"1.11"}]},
    // #ef7521 => orange
    {"featureType":"road.arterial","elementType":"labels.icon","stylers":[{"visibility":"simplified"}]},
    {"featureType":"transit","elementType":"all","stylers":[{"visibility":"simplified"}]},
    // {"featureType":"water","elementType":"geometry.fill","stylers":[{"color":"#2970C7"},{"visibility":"on"}]},
    {"featureType":"water","elementType":"geometry.stroke","stylers":[{"color":"#F2C100"},{"visibility":"on"}]},
    {"featureType":"road.local","elementType":"all","stylers":[{"visibility":"on"}]},],
    {name: "Default City Map"});

  var map = new google.maps.Map(document.getElementById('map'), {
                                                                  zoom: 11,
                                                                  zoomControl: true,
                                                                  scaleControl: true,
                                                                  mapTypeControlOptions: {
                                                                    mapTypeIds: [google.maps.MapTypeId.SATELLITE, google.maps.MapTypeId.ROADMAP,'default-city']
                                                                  }
                                                                });


  //set road map types, ids and custom styles
  // map.mapTypes.set('road', roadMapType);
  map.mapTypes.set('default-city', cityRoadType);
  map.setMapTypeId('default-city');
  //add window listener on loading initMap

  //set bounds on map
  map.fitBounds(kcBounds);
  //set marker for current location

  google.maps.event.addDomListener(window, 'load', initMap);

  function buildString(loc) {
    // console.log("Building string for loc:");
    // console.log(loc);
    var contentString = '<div id="content" class="br classtrain-green">'+'<div id="siteNotice">'+'<p>'+ loc.category +'</p></div>'+'<h2 id="firstHeading" class="firstHeading br">'+loc.name+'</h2>'+'<div id="bodyContent">'+'<h6><a class="linkedup">'+loc.address+ ', '+ loc.city +', ' + loc.state + ' '+ loc.zip + '</a></h6>'+'<h4>Hours Open</h4><p>'+loc.schedule+'</p>'+'<p>Website: <a href="'+loc.url+'">'+ loc.url +'</a></p>'+'</div>'+'</div>';
    // console.log("Verifying");
    // console.log(contentString);
    return contentString;
  };

  function buildMarker(map, loc) {
    // console.log("building marker");
    // console.log(loc);
    var marker = new google.maps.Marker({
                                          position: {lat: loc.position[0], lng: loc.position[1]},
                                          map: map,
                                          icon: setIcon(loc.category),
                                          shape: getShape(),

                                          title: loc.name,
                                          zIndex: loc.zIndex,
                                          metaData: [loc.address, loc.city, loc.state, loc.tel]
                                        });
    // var htmlInfoWindow = buildString
    var stringHtml = buildString(loc);
    // console.log("Checking**********************************************Marker");
    // console.log(marker);
    // console.log(marker.gm_bindings_);
    // console.log(marker.gm_accessors_);
    // marker.on("click", function(e) {
    //   console.log("clickclickclickclickclickclickclickclickclickclick");
    // });
    var window = attachWindow(marker, stringHtml);
    marker.addListener('click', function() {
      window.open(map, marker);
    });

    marker.addListener('mouseover', function() {
      window.open(map, marker);
    });

    marker.addListener('mouseout', function() {
      window.close(map, marker);
    });



















    // node.append('text')
    // .attr('font-family', 'FontAwesome')
    // .attr('font-size', function(d) { return d.size+'em'} )
    // .text(function(d) { return '\uf118' });

    return [marker,window];
  };

  function setMarkers(map, locations) {
    // console.log("setting markers");
    // console.log(locations);
    var shape = {
      coords: [1, 1, 1, 20, 18, 20, 18, 1],
      type: 'poly'
    };


    var mapIndex = {
      pubComputers: { markers: [], infowindows: [] },
      free: { markers: [], infowindows: [] },
      sale: { markers: [], infowindows: [] },
      day: { markers: [], infowindows: [] },
      night: { markers: [], infowindows: [] },
      lowCostCom: { markers: [], infowindows: [] },
    };

    // console.log("Building index for map");
    // console.log(mapIndex.pubCom.markers);
    // console.log(mapIndex.pubCom.infowindows);

    allMarkers = [];
    allWins = [];

    var pubCom = locations.publicComputers;
    var lowCost = locations.lowCost;
    var freeWifi = locations.freeWifi;
    var salesRequired = locations.reqPurchase;
    var dayClasses = locations.dayTraining;
    var nightClasses = locations.nightTraining;
    // console.log(pubCom);
    // console.log(lowCost);
    // console.log(freeWifi);
    // console.log(salesRequired);
    // console.log(dayClasses);
    // console.log(nightClasses);

    for (var i = 0; i < dayClasses.length; i++) {
      var getMarker = buildMarker(map, dayClasses[i]);
      var marker = getMarker[0];
      var infoWin = getMarker[1];
      mapIndex.day.infowindows.push(infoWin);
      mapIndex.day.markers.push(marker);
    };

    for (var i = 0; i < nightClasses.length; i++) {
      var getMarker = buildMarker(map, nightClasses[i]);
      var marker = getMarker[0];
      var infoWin = getMarker[1];
      mapIndex.night.infowindows.push(infoWin);
      mapIndex.night.markers.push(marker);
    };

    for (var i = 0; i < freeWifi.length; i++) {
      var getMarker = buildMarker(map, freeWifi[i]);
      var marker = getMarker[0];
      var infoWin = getMarker[1];
      mapIndex.free.infowindows.push(infoWin);
      mapIndex.free.markers.push(marker);
    };


    for (var i = 0; i < salesRequired.length; i++) {
      var getMarker = buildMarker(map, salesRequired[i]);
      var marker = getMarker[0];
      var infoWin = getMarker[1];
      mapIndex.sale.infowindows.push(infoWin);
      mapIndex.sale.markers.push(marker);
    };

    for (var i = 0; i < lowCost.length; i++) {
      var getMarker = buildMarker(map, lowCost[i]);
      var marker = getMarker[0];
      var infoWin = getMarker[1];
      mapIndex.lowCostCom.infowindows.push(infoWin);
      mapIndex.lowCostCom.markers.push(marker);
    };


    for (var i = 0; i < pubCom.length; i++) {
      var getMarker = buildMarker(map, pubCom[i]);
      var marker = getMarker[0];
      var infoWin = getMarker[1];
      mapIndex.pubComputers.infowindows.push(infoWin);
      mapIndex.pubComputers.markers.push(marker);
    };

    // console.log("INSPECTION: MapIndex");
    // console.log(mapIndex);
    return mapIndex;

  };//closes setMarkers(map)

  function handleMarkers(map) {
    // console.log("Calling handleMarkers(map) with arrLocs:");
    // var arrLocs = getAllLocations();


    var arrLocs = {
                    publicComputers: getPubComLocs(),
                    dayTraining: getDayCourseLocs(),
                    nightTraining: getNightCourseLocs(),
                    freeWifi: getFreeWifiLocs(),
                    reqPurchase: getWifiWithSalesLocs(),
                    lowCost: getLowCostComLocs()
                  };

    // console.log(arrLocs);
    var masterIndex = setMarkers(map, arrLocs);
    // console.log("Master Index***");
    // console.log(masterIndex);


    $(document).on("click", "#button-free-wifi", function(e){
      // console.log("hi from clicked free wifi button");
      for (var i = 0; i < masterIndex.free.markers.length; i++) {
        // console.log("MasterList Iteration - Markers&InfoWindows");
        // console.log(masterIndex[0][i]);
        // var marker = masterIndex[0][i];
        // console.log(masterIndex[1][i]);
        // var infowindow = masterIndex[1][i];
        // infowindow.open(map, marker);

        var marker = masterIndex.free.markers[i];
        var infowindow = masterIndex.free.infowindows[i];
        // console.log("XXXXXXXXXXXXX");
        // console.log(infowindow);
        infowindow.open(map,marker);

      };
      // for (var i = 0; i < masterIndex[1].length; i++) {
      //   console.log("MasterList Iteration - InfoWindows");
      //   console.log(masterIndex[1][i]);
      //   var infowindow = masterIndex[1][i];
      //   // infowindow.open(map, marker);
      // };
    });

    $(document).on("click", "#button-public-computers", function(e) {
      // console.log("ready for button to load public computer markers");
    });

    $(document).on("click", "#button-computer-training", function(e) {
      console.log("ready for button to load computer training markers");

      for (var i = 0; i < masterIndex.day.markers.length; i++) {
        var marker = masterIndex.day.markers[i];
        var infowindow = masterIndex.day.infowindows[i];
        infowindow.open(map,marker);
      }

      for (var i = 0; i < masterIndex.night.markers.length; i++) {
        var marker = masterIndex.night.markers[i];
        var infowindow = masterIndex.night.infowindows[i];
        infowindow.open(map,marker);
      }


    });

    $(document).on("click", "#button-low-cost-computers", function(e) {
      console.log("ready for button to load low cost computer markers");
    });
  };

  handleMarkers(map);




};//close function initMap(location)





// var mongoose = require('mongoose');

// $(document).on("ready", function(e) {
//   console.log("**On-ready event listener**");
//   // handleMarkers(map);


//   var PLocation = mongoose.model('PowerLocations', locationSchema);
// });